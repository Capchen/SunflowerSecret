import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as r,c as l,b as s,d as a,e as o,a as u}from"./app-84404c13.js";const i={},c={href:"https://router.vuejs.org/zh/guide/advanced/lazy-loading.html",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/tc39/proposal-dynamic-import",target:"_blank",rel:"noopener noreferrer"},d={href:"https://babeljs.io/docs/plugins/syntax-dynamic-import/",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/smooth-code/loadable-components",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/smooth-code/loadable-components/blob/master/packages/server/README.md",target:"_blank",rel:"noopener noreferrer"};function b(g,n){const t=e("ExternalLinkIcon");return r(),l("div",null,[n[24]||(n[24]=s("h3",{id:"vue中的代码分割-路由懒加载",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#vue中的代码分割-路由懒加载","aria-hidden":"true"},"#"),a(" vue中的代码分割（路由懒加载）")],-1)),n[25]||(n[25]=s("p",null,"结合异步组件和webpack的代码分割功能来实现路由组件的懒加载",-1)),s("blockquote",null,[s("p",null,[n[1]||(n[1]=a("链接地址 ")),s("a",c,[n[0]||(n[0]=a("https://router.vuejs.org/zh/guide/advanced/lazy-loading.html")),o(t)])])]),n[26]||(n[26]=s("p",null,[a("首先，将异步组件定义为返回一个Promise的工厂函数"),s("br"),s("code",null,"const foo = () => Promise.resolve({ /*组件定义对象*/ })"),a(" "),s("br"),a(" 然后根据webpack代码分割规则，定义分割点"),s("br"),s("code",null,"import('./Foo.vue')"),a("  // 返回Promise")],-1)),s("blockquote",null,[s("p",null,[n[3]||(n[3]=a("注意:")),n[4]||(n[4]=s("br",null,null,-1)),n[5]||(n[5]=a(" 动态 ")),n[6]||(n[6]=s("code",null,"import()",-1)),n[7]||(n[7]=a(" 语法是ECMAScript（JavaScript）")),s("a",k,[n[2]||(n[2]=a("提案")),o(t)]),n[8]||(n[8]=a("，目前不是语言标准的一部分。预计在不远的将来会被接受。"))])]),s("blockquote",null,[s("p",null,[n[10]||(n[10]=a("注意")),n[11]||(n[11]=s("br",null,null,-1)),n[12]||(n[12]=a(" 如果您使用的是 Babel，你将需要添加 ")),s("a",d,[n[9]||(n[9]=s("code",null,"syntax-dynamic-import",-1)),o(t)]),n[13]||(n[13]=a(" 插件，才能使 Babel 可以正确地解析语法"))])]),n[27]||(n[27]=u(`<p>结合这两者，这就是如何定义一个能够被 Webpack 自动代码分割的异步组件。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./Foo.vue&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="react中的代码分割" tabindex="-1"><a class="header-anchor" href="#react中的代码分割" aria-hidden="true">#</a> react中的代码分割</h3><h4 id="基于路由的代码拆分" tabindex="-1"><a class="header-anchor" href="#基于路由的代码拆分" aria-hidden="true">#</a> 基于路由的代码拆分</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Switch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-router-dom&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Suspense<span class="token punctuation">,</span> lazy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./routes/Home&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./routes/About&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route exact path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Router<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的代码是路由和lazy配合拆分的示例，和vue的方式大同小异<br> lazy函数的作用就是允许渲染动态导入为常规组件。<br> Suspense组件的作用就是类似于骨架屏或者加载指示符，在等待加载的时候出现。</p>`,6)),s("blockquote",null,[s("p",null,[n[16]||(n[16]=a("注意：")),n[17]||(n[17]=s("br",null,null,-1)),n[18]||(n[18]=s("code",null,"React.lazy",-1)),n[19]||(n[19]=a(" 和 Suspense 尚不可用于服务器端渲染。如果要在服务器渲染的应用程序中进行代码拆分，我们建议使用 ")),s("a",m,[n[14]||(n[14]=a("Loadable Components")),o(t)]),n[20]||(n[20]=a(" 。它有一个很好的")),s("a",v,[n[15]||(n[15]=a("服务器端渲染打包拆分指南")),o(t)]),n[21]||(n[21]=a("。")),n[22]||(n[22]=s("br",null,null,-1)),n[23]||(n[23]=a(" 并且lazy只支持默认导出，并不支持命名导出，想要命名导出那就as defalut"))])])])}const w=p(i,[["render",b],["__file","vue和react的代码分割.html.vue"]]);export{w as default};
